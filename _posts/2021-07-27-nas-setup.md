---
layout: post
title: "NAS Setup"
date: 2021-07-27 09:00:00 -0500
categories: [Training-SOC, Nas]
tags: [nas, nfs, storage, guide]
---
A network attached storage (NAS) device is an extremely conveniant utility to have in your envoronment and makes a very efficient and useful central location for storage of resources of all kinds. It will act as a server for other clients on the network that can use the NAS to store and retrieve files.

The main use case for us is to have a central location to store VM images and disks for our Proxmox virtualization datacenter. With this implementation using a network file system server we will only need to upload `.iso` files once and then be able to boot from them on any node in the cluster.

# Hardware Configuration
The preferred hardware configuration for this kind of setup would be a server with as many large drives as possible and two small small drives for the OS installation. The drives for the OS should be set up in a RAID 1 configuration and the storage dives should be set up in a RAID 5 configuration.  

# Ubuntu Server Install
To set up the NAS we first need to install an operating system. We've chosen to use Ubuntu server 20.04, but you can easily set up an NFS server with any standard linux server distribution.

Flash a usb drive with the `.iso` of your choice using either [Rufus](https://rufus.ie/en_US/) or [Etcher](https://www.balena.io/etcher/) and then boot from it and follow the install process. Make sure to note the IP address of the server (you will want to set this up as a [static](https://linuxize.com/post/how-to-configure-static-ip-address-on-ubuntu-20-04/) address). You will also want to set up [ssh access](https://linuxize.com/post/how-to-enable-ssh-on-ubuntu-20-04/).

# Storage Configuration
Now that you have ubuntu server installed you should ssh into it and configure the storage you want to serve out with NFS.

## Partition
The first step to configuring storage for NFS is partitioning the drive you wish to use, in our case the RAID 5 configured virtual disk.

Use `fdisk -l` to list the drives

